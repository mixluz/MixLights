MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ; *****************************************************************************
                      00002 #include        p16f628.inc     ; Standard include file
                      00001         LIST
                      00002 ; P16F628.INC  Standard Header File, Version 1.01    Microchip Technology, Inc.
                      00258         LIST
                      00003 #include        instruct.inc    ; Bring in complex instructions
                      00001 ; *****************************************************************************
                      00002 #define skifz           btfss   STATUS, Z       ; Skip if zero
                      00003 #define skifnz          btfsc   STATUS, Z       ; Skip if not zero
                      00004 ; *****************************************************************************
                      00005 
                      00006 ; *** Branch if Zero **********************************************************
                      00007 brz     macro   WHERE
                      00008         skifnz
                      00009         goto    WHERE
                      00010         endm
                      00011 ; *****************************************************************************
                      00012 
                      00013 ; *** Branch if Not Zero ******************************************************
                      00014 brnz    macro   WHERE
                      00015         skifz
                      00016         goto    WHERE
                      00017         endm
                      00018 ; *****************************************************************************
                      00019 
                      00020 ; *** Wait Until Set **********************************************************
                      00021 wus     macro   WHO, BIT
                      00022         btfss   WHO, BIT
                      00023         goto    $ - 1
                      00024         endm
                      00025 ; *****************************************************************************
                      00026 
                      00027 ; *** Wait Until Clear ********************************************************
                      00028 wuc     macro   WHO, BIT
                      00029         btfsc   WHO, BIT
                      00030         goto    $ - 1
                      00031         endm
                      00032 ; *****************************************************************************
                      00033 
                      00034 ; *** Branch if Bit is Set ****************************************************
                      00035 brset   macro   WHO, BIT, WHERE 
                      00036         btfsc   WHO, BIT
                      00037         goto    WHERE
                      00038         endm
                      00039 ; *****************************************************************************
                      00040 
                      00041 ; *** Branch if Bit is Clear **************************************************
                      00042 brclr   macro   WHO, BIT, WHERE
                      00043         btfss   WHO, BIT
                      00044         goto    WHERE
                      00045         endm    
                      00046 ; *****************************************************************************
                      00047 
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00048 ; *** Branch if Negative ******************************************************
                      00049 brn     macro   WHERE
                      00050         btfss   STATUS, C
                      00051         goto    WHERE
                      00052         endm
                      00053 ; *****************************************************************************
                      00054 
                      00055 ; *** If FILE1 > FILE2 then Branch ********************************************
                      00056 cffbig  macro   FILE1, FILE2, WHERE
                      00057         movf    FILE1, W
                      00058         subwf   FILE2, W
                      00059         btfss   STATUS, C
                      00060         goto    WHERE
                      00061         endm
                      00062 ; *****************************************************************************
                      00063 
                      00064 ; *** If FILE1 < FILE2 then Branch ********************************************
                      00065 cffbis  macro   FILE1, FILE2, WHERE
                      00066         movf    FILE2, W
                      00067         subwf   FILE1, W
                      00068         btfss   STATUS, C
                      00069         goto    WHERE
                      00070         endm
                      00071 ; *****************************************************************************
                      00072 
                      00073 ; *** If FILE1 = FILE2 then Branch ********************************************
                      00074 cffbie  macro   FILE1, FILE2, WHERE
                      00075         movf    FILE2, W
                      00076         subwf   FILE1, W
                      00077         btfsc   STATUS, Z
                      00078         goto    WHERE
                      00079         endm
                      00080 ; *****************************************************************************
                      00081 
                      00082 ; *** If FILE1 != FILE2 then Branch *******************************************
                      00083 cffbin  macro   FILE1, FILE2, WHERE
                      00084         movf    FILE2, W
                      00085         subwf   FILE1, W
                      00086         btfss   STATUS, Z
                      00087         goto    WHERE
                      00088         endm
                      00089 ; *****************************************************************************
                      00090 
                      00091 ; *** If FILE1 > LIT1 then Branch *********************************************
                      00092 cflbig  macro   FILE1, LIT1, WHERE
                      00093         movf    FILE1, W
                      00094         sublw   LIT1
                      00095         btfss   STATUS, C
                      00096         goto    WHERE
                      00097         endm
                      00098 ; *****************************************************************************
                      00099 
                      00100 ; *** If FILE1 < LIT1 then Branch *********************************************
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00101 cflbis  macro   FILE1, LIT1, WHERE
                      00102         movlw   LIT1
                      00103         subwf   FILE1, W
                      00104         btfss   STATUS, C
                      00105         goto    WHERE
                      00106         endm
                      00107 ; *****************************************************************************
                      00108 
                      00109 ; *** If FILE1 = LIT1 then Branch *********************************************
                      00110 cflbie  macro   FILE1, LIT1, WHERE
                      00111         movf    FILE1, W
                      00112         sublw   LIT1
                      00113         btfsc   STATUS, Z
                      00114         goto    WHERE
                      00115         endm
                      00116 ; *****************************************************************************
                      00117 
                      00118 ; *** If FILE1 != LIT1 then Branch ********************************************
                      00119 cflbin  macro   FILE1, LIT1, WHERE
                      00120         movf    FILE1, W
                      00121         sublw   LIT1
                      00122         btfss   STATUS, Z
                      00123         goto    WHERE
                      00124         endm
                      00125 ; *****************************************************************************
                      00126 
                      00127 ; *** If FILE1 > FILE2 then Branch ********************************************
                      00128 cffcig  macro   FILE1, FILE2, WHERE
                      00129         movf    FILE1, W
                      00130         subwf   FILE2, W
                      00131         btfss   STATUS, C
                      00132         call    WHERE
                      00133         endm
                      00134 ; *****************************************************************************
                      00135 
                      00136 ; *** If FILE1 < FILE2 then Branch ********************************************
                      00137 cffcis  macro   FILE1, FILE2, WHERE
                      00138         movf    FILE2, W
                      00139         subwf   FILE1, W
                      00140         btfss   STATUS, C
                      00141         call    WHERE
                      00142         endm
                      00143 ; *****************************************************************************
                      00144 
                      00145 ; *** If FILE1 = FILE2 then Branch ********************************************
                      00146 cffcie  macro   FILE1, FILE2, WHERE
                      00147         movf    FILE2, W
                      00148         subwf   FILE1, W
                      00149         btfsc   STATUS, Z
                      00150         call    WHERE
                      00151         endm
                      00152 ; *****************************************************************************
                      00153 
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00154 ; *** If FILE1 != FILE2 then Branch *******************************************
                      00155 cffcin  macro   FILE1, FILE2, WHERE
                      00156         movf    FILE2, W
                      00157         subwf   FILE1, W
                      00158         btfss   STATUS, Z
                      00159         call    WHERE
                      00160         endm
                      00161 ; *****************************************************************************
                      00162 
                      00163 ; *** If FILE1 > LIT1 then Branch *********************************************
                      00164 cflcig  macro   FILE1, LIT1, WHERE
                      00165         movf    FILE1, W
                      00166         sublw   LIT1
                      00167         btfss   STATUS, C
                      00168         call    WHERE
                      00169         endm
                      00170 ; *****************************************************************************
                      00171 
                      00172 ; *** If FILE1 < LIT1 then Branch *********************************************
                      00173 cflcis  macro   FILE1, LIT1, WHERE
                      00174         movlw   LIT1
                      00175         subwf   FILE1, W
                      00176         btfss   STATUS, C
                      00177         call    WHERE
                      00178         endm
                      00179 ; *****************************************************************************
                      00180 
                      00181 ; *** If FILE1 = LIT1 then Branch *********************************************
                      00182 cflcie  macro   FILE1, LIT1, WHERE
                      00183         movf    FILE1, W
                      00184         sublw   LIT1
                      00185         btfsc   STATUS, Z
                      00186         call    WHERE
                      00187         endm
                      00188 ; *****************************************************************************
                      00189 
                      00190 ; *** If FILE1 != LIT1 then Branch ********************************************
                      00191 cflcin  macro   FILE1, LIT1, WHERE
                      00192         movf    FILE1, W
                      00193         sublw   LIT1
                      00194         btfss   STATUS, Z
                      00195         call    WHERE
                      00196         endm
                      00197 ; *****************************************************************************
                      00198 
                      00199 ; *****************************************************************************
                      00200 movff   macro   HERE, THERE
                      00201         movf    HERE, W
                      00202         movwf   THERE
                      00203         endm
                      00204 ; *****************************************************************************
                      00205 
                      00206 ; *****************************************************************************
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00207 movlf   macro   DAT, THERE
                      00208         movlw   DAT
                      00209         movwf   THERE
                      00210         endm
                      00211 ; *****************************************************************************
                      00212 
                      00213 ; *** Add Literal to File *****************************************************
                      00214 addlf   macro   LIT1, FILE1, DIR
                      00215         movlw   LIT1
                      00216         addwf   FILE1, DIR
                      00217         endm    
                      00218 ; *****************************************************************************
                      00219 
                      00220 ; *** Subtract Literal from File **********************************************
                      00221 sublf   macro   LIT1, FILE1, DIR
                      00222         movlw   LIT1
                      00223         subwf   FILE1, DIR
                      00224         endm    
                      00225 ; *****************************************************************************
                      00226 
                      00227 ; *** Branch if Carry *********************************************************
                      00228 brc     macro   WHERE
                      00229         btfsc   STATUS, C
                      00230         goto    WHERE
                      00231         endm
                      00232 ; *****************************************************************************
                      00233 
                      00234 ; *** Branch if No Carry ******************************************************
                      00235 brnc    macro   WHERE
                      00236         btfss   STATUS, C
                      00237         goto    WHERE
                      00238         endm
                      00239 ; *****************************************************************************
                      00240 
                      00241 ; *** OR file w/ file *********************************************************
                      00242 iorff   macro   FILE1, FILE2, DIR
                      00243         movf    FILE2, W
                      00244         iorwf   FILE1, DIR
                      00245         endm
                      00246 ; *****************************************************************************
                      00247 
                      00248 
                      00004 #include        user_mac.inc    ; Bring in application specific instructions
                      00001 #define dvron   bsf     PORTB, 3
                      00002 #define dvroff  bcf     PORTB, 3
                      00003 
                      00004 
                      00005 ; *****************************************************************************
                      00006 txdali  macro   MYREGH, MYREGL
                      00007         movff   MYREGH, DALI_H
                      00008         movff   MYREGL, DALI_L
                      00009         call    SendData
                      00010         endm
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00011 ; *****************************************************************************
                      00012 
                      00013 
                      00014 ; *****************************************************************************
                      00015 rxdali  macro
                      00016         call    RecvData
                      00017         endm
                      00018 ; *****************************************************************************
                      00019 
                      00020 
                      00021 ; *****************************************************************************
                      00022 tx      macro   MYREG
                      00023         movff   MYREG, TXREG
                      00024         endm
                      00025 ; *****************************************************************************
                      00026 
                      00027 
                      00028 ; *****************************************************************************
                      00029 delay   macro   MYLIT
                      00030         movlf   high MYLIT, TMR1H
                      00031         movlf   low MYLIT, TMR1L
                      00032         call    DelayCyclesT1
                      00033         endm
                      00034 ; *****************************************************************************
                      00035 
                      00036 
                      00037 ; *****************************************************************************
                      00038 delayf  macro   MYFILE_H, MYFILE_L
                      00039         movff   MYFILE_H, TMR1H
                      00040         movff   MYFILE_L, TMR1L
                      00041         call    DelayCyclesT1
                      00042         endm
                      00043 ; *****************************************************************************
                      00044 
                      00045 
                      00046 ; *** Set DALI Bus High *******************************************************
                      00047 outhi   macro
                      00048         bcf     PORTB, 4                ; Turn off clamp
                      00049         goto    $ + 1
                      00050         bsf     PORTB, 5                ; Turn on output
                      00051 ;       goto    $ + 1
                      00052 ;       goto    $ + 1
                      00053         endm
                      00054 ; *****************************************************************************
                      00055 
                      00056 
                      00057 ; *** Set DALI Bus Low ********************************************************
                      00058 outlo   macro
                      00059         bcf     PORTB, 5                ; Turn off output driver
                      00060         goto    $ + 1                   ; Wait a little for gate discharge
                      00061         bsf     PORTB, 4                ; Turn on clamp
                      00062 ;       goto    $ + 1
                      00063         endm
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00064 ; *****************************************************************************
                      00065 
                      00066 
                      00067 ; *** Emergency Shutdown ******************************************************
                      00068 esdwn   macro   WHERE
                      00069         bcf     PORTB, 3                ; Turn off output driver
                      00070         goto    WHERE
                      00071         endm
                      00072 ; *****************************************************************************
                      00073 
                      00074 
                      00075 ; *****************************************************************************
                      00076 wrtee   macro   MYREG
                      00077         banksel EEADR
                      00078         movwf   EEDATA                          ; Init the first values 
                      00079         movlw   TX_EDGE_DELAY_H
                      00080         sublw   MYREG
                      00081         movwf   EEADR 
                      00082         call    WriteEEData
                      00083         endm
                      00084 ; *****************************************************************************
                      00085 
                      00086 
                      00005 ; *****************************************************************************
                      00006 
                      00007 
                      00008 ; *****************************************************************************
  0000                00009         EXTERN  SendData
  0000                00010         EXTERN  RecvData
                      00011 
  0000                00012         EXTERN  WriteEEData
                      00013 
  0000                00014         EXTERN  Main
  0000                00015         EXTERN  DelayCyclesT1
                      00016 
  0000                00017         EXTERN  WREG1, DALI_H, DALI_L
  0000                00018         EXTERN  MILLISECONDS
  0000                00019         EXTERN  BRIDGE_STATUS
                      00020 
  0000                00021         EXTERN  DALI_H_BAK1, DALI_L_BAK1
  0000                00022         EXTERN  DALI_H_BAK2, DALI_L_BAK2
  0000                00023         EXTERN  DALI_H_BAK3, DALI_L_BAK3
                      00024 
  0000                00025         EXTERN  TX_EDGE_DELAY_H, TX_EDGE_DELAY_L, TX_STOP_DELAY_H, TX_STOP_DELAY_L
  0000                00026         EXTERN  TX_REG_DELAY_H, TX_REG_DELAY_L, RX_WAIT, RX_START_DELAY_H
  0000                00027         EXTERN  RX_START_DELAY_L, RX_SAMPLE_DELAY_H, RX_SAMPLE_DELAY_L
  0000                00028         EXTERN  RX_DELAY_NEXT_H, RX_DELAY_NEXT_L, DOUBLE_SEND_DELAY, SEQUENCE_DELAY
  0000                00029         EXTERN  RX_DEBUG, BAUD_RATE
                      00030 ; *****************************************************************************
                      00031 
                      00032 
                      00033 ; *****************************************************************************
                      00034 CHANGE_SETTINGS CODE
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00035 ; *****************************************************************************
0000                  00036 ChngTXEdgeDelay
                      00037         
                      00038         movff   DALI_H, TX_EDGE_DELAY_H
0000   08??               M         movf    DALI_H, W
0001   00??               M         movwf   TX_EDGE_DELAY_H
                      00039         wrtee   TX_EDGE_DELAY_H
0002   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0004   009A               M         movwf   EEDATA                          ; Init the first values 
0005   30??               M         movlw   TX_EDGE_DELAY_H
0006   3C??               M         sublw   TX_EDGE_DELAY_H
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0007   009B               M         movwf   EEADR 
0008   2???               M         call    WriteEEData
                      00040 
                      00041         movff   DALI_L, TX_EDGE_DELAY_L
0009   08??               M         movf    DALI_L, W
000A   00??               M         movwf   TX_EDGE_DELAY_L
                      00042         wrtee   TX_EDGE_DELAY_L
000B   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000D   009A               M         movwf   EEDATA                          ; Init the first values 
000E   30??               M         movlw   TX_EDGE_DELAY_H
000F   3C??               M         sublw   TX_EDGE_DELAY_L
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0010   009B               M         movwf   EEADR 
0011   2???               M         call    WriteEEData
                      00043 
0012   2???           00044         goto    Main
                      00045 
  0000                00046         GLOBAL  ChngTXEdgeDelay
                      00047 ; *****************************************************************************
                      00048 
                      00049 
                      00050 ; *****************************************************************************
0013                  00051 ChngTXStopDelay
                      00052 
                      00053         movff   DALI_H, TX_STOP_DELAY_H
0013   08??               M         movf    DALI_H, W
0014   00??               M         movwf   TX_STOP_DELAY_H
                      00054         wrtee   TX_STOP_DELAY_H
0015   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   009A               M         movwf   EEDATA                          ; Init the first values 
0018   30??               M         movlw   TX_EDGE_DELAY_H
0019   3C??               M         sublw   TX_STOP_DELAY_H
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001A   009B               M         movwf   EEADR 
001B   2???               M         call    WriteEEData
                      00055 
                      00056         movff   DALI_L, TX_STOP_DELAY_L
001C   08??               M         movf    DALI_L, W
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001D   00??               M         movwf   TX_STOP_DELAY_L
                      00057         wrtee   TX_STOP_DELAY_L
001E   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0020   009A               M         movwf   EEDATA                          ; Init the first values 
0021   30??               M         movlw   TX_EDGE_DELAY_H
0022   3C??               M         sublw   TX_STOP_DELAY_L
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0023   009B               M         movwf   EEADR 
0024   2???               M         call    WriteEEData
                      00058 
0025   2???           00059         goto    Main
                      00060 
                      00061 
  0000                00062         GLOBAL  ChngTXStopDelay
                      00063 ; *****************************************************************************
                      00064 
                      00065 
                      00066 ; *****************************************************************************
0026                  00067 ChngTXRegDelay
                      00068 
                      00069         movff   DALI_H, TX_REG_DELAY_H
0026   08??               M         movf    DALI_H, W
0027   00??               M         movwf   TX_REG_DELAY_H
                      00070         wrtee   TX_REG_DELAY_H
0028   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002A   009A               M         movwf   EEDATA                          ; Init the first values 
002B   30??               M         movlw   TX_EDGE_DELAY_H
002C   3C??               M         sublw   TX_REG_DELAY_H
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002D   009B               M         movwf   EEADR 
002E   2???               M         call    WriteEEData
                      00071 
                      00072         movff   DALI_L, TX_REG_DELAY_L
002F   08??               M         movf    DALI_L, W
0030   00??               M         movwf   TX_REG_DELAY_L
                      00073         wrtee   TX_REG_DELAY_L
0031   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0033   009A               M         movwf   EEDATA                          ; Init the first values 
0034   30??               M         movlw   TX_EDGE_DELAY_H
0035   3C??               M         sublw   TX_REG_DELAY_L
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0036   009B               M         movwf   EEADR 
0037   2???               M         call    WriteEEData
                      00074 
0038   2???           00075         goto    Main
                      00076 
  0000                00077         GLOBAL  ChngTXRegDelay
                      00078 ; *****************************************************************************
                      00079 
                      00080 
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00081 ; *****************************************************************************
0039                  00082 ChngRXWait
                      00083 
                      00084         movff   DALI_L, RX_WAIT
0039   08??               M         movf    DALI_L, W
003A   00??               M         movwf   RX_WAIT
                      00085         wrtee   RX_WAIT
003B   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
003D   009A               M         movwf   EEDATA                          ; Init the first values 
003E   30??               M         movlw   TX_EDGE_DELAY_H
003F   3C??               M         sublw   RX_WAIT
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0040   009B               M         movwf   EEADR 
0041   2???               M         call    WriteEEData
                      00086 
0042   2???           00087         goto    Main
                      00088 
  0000                00089         GLOBAL  ChngRXWait
                      00090 ; *****************************************************************************
                      00091 
                      00092 
                      00093 ; *****************************************************************************
0043                  00094 ChngRXStartDelay
                      00095 
                      00096         movff   DALI_H, RX_START_DELAY_H
0043   08??               M         movf    DALI_H, W
0044   00??               M         movwf   RX_START_DELAY_H
                      00097         wrtee   RX_START_DELAY_H
0045   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0047   009A               M         movwf   EEDATA                          ; Init the first values 
0048   30??               M         movlw   TX_EDGE_DELAY_H
0049   3C??               M         sublw   RX_START_DELAY_H
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
004A   009B               M         movwf   EEADR 
004B   2???               M         call    WriteEEData
                      00098 
                      00099         movff   DALI_L, RX_START_DELAY_L
004C   08??               M         movf    DALI_L, W
004D   00??               M         movwf   RX_START_DELAY_L
                      00100         wrtee   RX_START_DELAY_L
004E   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0050   009A               M         movwf   EEDATA                          ; Init the first values 
0051   30??               M         movlw   TX_EDGE_DELAY_H
0052   3C??               M         sublw   RX_START_DELAY_L
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0053   009B               M         movwf   EEADR 
0054   2???               M         call    WriteEEData
                      00101 
0055   2???           00102         goto    Main
                      00103 
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                00104         GLOBAL  ChngRXStartDelay
                      00105 ; *****************************************************************************
                      00106 
                      00107 
                      00108 ; *****************************************************************************
0056                  00109 ChngRXSampleDelay
                      00110 
                      00111         movff   DALI_H, RX_SAMPLE_DELAY_H
0056   08??               M         movf    DALI_H, W
0057   00??               M         movwf   RX_SAMPLE_DELAY_H
                      00112         wrtee   RX_SAMPLE_DELAY_H
0058   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
005A   009A               M         movwf   EEDATA                          ; Init the first values 
005B   30??               M         movlw   TX_EDGE_DELAY_H
005C   3C??               M         sublw   RX_SAMPLE_DELAY_H
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
005D   009B               M         movwf   EEADR 
005E   2???               M         call    WriteEEData
                      00113 
                      00114         movff   DALI_L, RX_SAMPLE_DELAY_L
005F   08??               M         movf    DALI_L, W
0060   00??               M         movwf   RX_SAMPLE_DELAY_L
                      00115         wrtee   RX_SAMPLE_DELAY_L
0061   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0063   009A               M         movwf   EEDATA                          ; Init the first values 
0064   30??               M         movlw   TX_EDGE_DELAY_H
0065   3C??               M         sublw   RX_SAMPLE_DELAY_L
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0066   009B               M         movwf   EEADR 
0067   2???               M         call    WriteEEData
                      00116 
0068   2???           00117         goto    Main
                      00118 
  0000                00119         GLOBAL  ChngRXSampleDelay
                      00120 ; *****************************************************************************
                      00121 
                      00122 
                      00123 ; *****************************************************************************
0069                  00124 ChngRXDelayNext
                      00125 
                      00126         movff   DALI_H, RX_DELAY_NEXT_H
0069   08??               M         movf    DALI_H, W
006A   00??               M         movwf   RX_DELAY_NEXT_H
                      00127         wrtee   RX_DELAY_NEXT_H
006B   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
006D   009A               M         movwf   EEDATA                          ; Init the first values 
006E   30??               M         movlw   TX_EDGE_DELAY_H
006F   3C??               M         sublw   RX_DELAY_NEXT_H
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0070   009B               M         movwf   EEADR 
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0071   2???               M         call    WriteEEData
                      00128 
                      00129         movff   DALI_L, RX_DELAY_NEXT_L
0072   08??               M         movf    DALI_L, W
0073   00??               M         movwf   RX_DELAY_NEXT_L
                      00130         wrtee RX_DELAY_NEXT_L
0074   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0076   009A               M         movwf   EEDATA                          ; Init the first values 
0077   30??               M         movlw   TX_EDGE_DELAY_H
0078   3C??               M         sublw   RX_DELAY_NEXT_L
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0079   009B               M         movwf   EEADR 
007A   2???               M         call    WriteEEData
                      00131 
007B   2???           00132         goto    Main
                      00133 
  0000                00134         GLOBAL  ChngRXDelayNext
                      00135 ; *****************************************************************************
                      00136 
                      00137 
                      00138 ; *****************************************************************************
007C                  00139 ChngRXDebug
                      00140         
007C   1683 1303      00141         banksel TRISB
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
007E   1386           00142         bcf     TRISB, 7
007F   1283 1303      00143         banksel PORTB
                      00144         movff   DALI_L, RX_DEBUG
0081   08??               M         movf    DALI_L, W
0082   00??               M         movwf   RX_DEBUG
                      00145 ;       wrtee   RX_DEBUG
                      00146 
  0000                00147         GLOBAL  ChngRXDebug
                      00148 ; *****************************************************************************
                      00149 
                      00150 
                      00151 ; *****************************************************************************
0083                  00152 ChngDblSendDelay
                      00153 
                      00154         movff   DALI_L, DOUBLE_SEND_DELAY
0083   08??               M         movf    DALI_L, W
0084   00??               M         movwf   DOUBLE_SEND_DELAY
                      00155         wrtee   DOUBLE_SEND_DELAY
0085   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0087   009A               M         movwf   EEDATA                          ; Init the first values 
0088   30??               M         movlw   TX_EDGE_DELAY_H
0089   3C??               M         sublw   DOUBLE_SEND_DELAY
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
008A   009B               M         movwf   EEADR 
008B   2???               M         call    WriteEEData
                      00156 
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

008C   2???           00157         goto    Main
                      00158 
  0000                00159         GLOBAL  ChngDblSendDelay
                      00160 ; *****************************************************************************
                      00161 
                      00162 
                      00163 ; *****************************************************************************
008D                  00164 ChngSequenceDelay
                      00165 
                      00166         movff   DALI_L, SEQUENCE_DELAY
008D   08??               M         movf    DALI_L, W
008E   00??               M         movwf   SEQUENCE_DELAY
                      00167         wrtee   SEQUENCE_DELAY
008F   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0091   009A               M         movwf   EEDATA                          ; Init the first values 
0092   30??               M         movlw   TX_EDGE_DELAY_H
0093   3C??               M         sublw   SEQUENCE_DELAY
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0094   009B               M         movwf   EEADR 
0095   2???               M         call    WriteEEData
                      00168 
0096   2???           00169         goto    Main
                      00170 
  0000                00171         GLOBAL  ChngSequenceDelay
                      00172 ; *****************************************************************************
                      00173 
                      00174 
                      00175 ; *****************************************************************************
0097                  00176 ChngBaudRate
                      00177 
                      00178         movff   DALI_L, BAUD_RATE
0097   08??               M         movf    DALI_L, W
0098   00??               M         movwf   BAUD_RATE
                      00179         wrtee   BAUD_RATE
0099   1683 1303          M         banksel EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
009B   009A               M         movwf   EEDATA                          ; Init the first values 
009C   30??               M         movlw   TX_EDGE_DELAY_H
009D   3C??               M         sublw   BAUD_RATE
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
009E   009B               M         movwf   EEADR 
009F   2???               M         call    WriteEEData
                      00180 
00A0   2???           00181         goto    Main
                      00182 
  0000                00183         GLOBAL  ChngBaudRate
                      00184 ; *****************************************************************************
                      00185 
                      00186 
                      00187 
                      00188 
                      00189         END
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

ADEN                              00000003
BAUD_RATE                         00000000
BRGH                              00000002
BRIDGE_STATUS                     00000000
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CIS                               00000003
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000001F
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
ChngBaudRate                      00000097
ChngDblSendDelay                  00000083
ChngRXDebug                       0000007C
ChngRXDelayNext                   00000069
ChngRXSampleDelay                 00000056
ChngRXStartDelay                  00000043
ChngRXWait                        00000039
ChngSequenceDelay                 0000008D
ChngTXEdgeDelay                   00000000
ChngTXRegDelay                    00000026
ChngTXStopDelay                   00000013
DALI_H                            00000000
DALI_H_BAK1                       00000000
DALI_H_BAK2                       00000000
DALI_H_BAK3                       00000000
DALI_L                            00000000
DALI_L_BAK1                       00000000
DALI_L_BAK2                       00000000
DALI_L_BAK3                       00000000
DC                                00000001
DOUBLE_SEND_DELAY                 00000000
DelayCyclesT1                     00000000
EEADR                             0000009B
EECON1                            0000009C
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

EECON2                            0000009D
EEDATA                            0000009A
EEIE                              00000007
EEIF                              00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GIE                               00000007
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
MILLISECONDS                      00000000
Main                              00000000
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_T1SYNC                        00000002
NOT_TO                            00000004
OERR                              00000001
OPTION_REG                        00000081
OSCF                              00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIR1                              0000000C
PORTA                             00000005
PORTB                             00000006
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
RBIE                              00000003
RBIF                              00000000
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RP0                               00000005
RP1                               00000006
RX9                               00000006
RX9D                              00000000
RX_DEBUG                          00000000
RX_DELAY_NEXT_H                   00000000
RX_DELAY_NEXT_L                   00000000
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

RX_SAMPLE_DELAY_H                 00000000
RX_SAMPLE_DELAY_L                 00000000
RX_START_DELAY_H                  00000000
RX_START_DELAY_L                  00000000
RX_WAIT                           00000000
RecvData                          00000000
SEQUENCE_DELAY                    00000000
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
STATUS                            00000003
SYNC                              00000004
SendData                          00000000
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1OSCEN                           00000003
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
TRMT                              00000001
TX9                               00000006
TX9D                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
TX_EDGE_DELAY_H                   00000000
TX_EDGE_DELAY_L                   00000000
TX_REG_DELAY_H                    00000000
TX_REG_DELAY_L                    00000000
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

TX_STOP_DELAY_H                   00000000
TX_STOP_DELAY_L                   00000000
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             0000009F
VREN                              00000007
VROE                              00000006
VRR                               00000005
W                                 00000000
WR                                00000001
WREG1                             00000000
WREN                              00000002
WRERR                             00000003
WriteEEData                       00000000
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CP_50                            00002BFF
_CP_75                            000017FF
_CP_ALL                           000003FF
_CP_OFF                           00003FFF
_ER_OSC_CLKOUT                    00003FFF
_ER_OSC_NOCLKOUT                  00003FFE
_EXTCLK_OSC                       00003FEF
_HS_OSC                           00003FEE
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FEC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FED
__16F628                          00000001
__DEBUG                           1
addlf                             
brc                               
brclr                             
brn                               
brnc                              
brnz                              
brset                             
brz                               
cffbie                            
cffbig                            
cffbin                            
cffbis                            
MPASM  5.36                          CMD5.ASM   9-16-2010  14:18:49         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

cffcie                            
cffcig                            
cffcin                            
cffcis                            
cflbie                            
cflbig                            
cflbin                            
cflbis                            
cflcie                            
cflcig                            
cflcin                            
cflcis                            
delay                             
delayf                            
dvroff                            bcf     PORTB, 3
dvron                             bsf     PORTB, 3
esdwn                             
iorff                             
movff                             
movlf                             
outhi                             
outlo                             
rxdali                            
skifnz                            btfsc   STATUS, Z
skifz                             btfss   STATUS, Z
sublf                             
tx                                
txdali                            
wrtee                             
wuc                               
wus                               

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    33 reported,     0 suppressed

